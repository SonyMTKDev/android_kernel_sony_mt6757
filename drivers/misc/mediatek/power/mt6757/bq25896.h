/*
 * Copyright (C) 2016 MediaTek Inc.
 * ShuFanLee <shufan_lee@richtek.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See http://www.gnu.org/licenses/gpl-2.0.html for more details.
 */

#ifndef __BQ25896_CHARGER_H
#define __BQ25896_CHARGER_H

#define BQ25896_SLAVE_ADDR	0x6B
#define BQ25896_DEVICE_ID_E1	0x00
#define BQ25896_DEVICE_ID_E2	0x01
#define BQ25896_DEVICE_ID_E3	0x02
#define BQ25896_DEVICE_ID_E4	0x03

enum bq25896_reg_addr {
	BQ25896_CON0 = 0x00, 
	BQ25896_CON1,
	BQ25896_CON2,
	BQ25896_CON3,
	BQ25896_CON4,
	BQ25896_CON5,
	BQ25896_CON6,
	BQ25896_CON7,
	BQ25896_CON8,
	BQ25896_CON9,
	BQ25896_CONA,
	BQ25896_CONB,
	BQ25896_CONC,
	BQ25896_COND,
	BQ25896_CONE,
	BQ25896_CONF,
	BQ25896_CON10,
	BQ25896_CON11,
	BQ25896_CON12,
	BQ25896_CON13,
	BQ25896_CON14,
	BQ25896_REG_NUM,
};

#define BQ25896_VINDPM_OS_NUM	32
#define BQ25896_VINDPM_OS_MAX	3100
#define BQ25896_VINDPM_OS_MIN	0
#define BQ25896_VINDPM_OS_STEP	100

#define BQ25896_ICHG_NUM	128
#define BQ25896_ICHG_MAX	3008
#define BQ25896_ICHG_MIN	0
#define BQ25896_ICHG_STEP	64

#define BQ25896_IINLIM_NUM	64
#define BQ25896_IINLIM_MAX	3250
#define BQ25896_IINLIM_MIN	100
#define BQ25896_IINLIM_STEP	50

#define BQ25896_VINDPM_NUM	128
#define BQ25896_VINDPM_MAX	15300
#define BQ25896_VINDPM_MIN	2600
#define BQ25896_VINDPM_STEP	100

#define BQ25896_CV_NUM	64
#define BQ25896_CV_MAX	4608
#define BQ25896_CV_MIN	3840
#define BQ25896_CV_STEP	16

#define BQ25896_BAT_COMP_NUM	8
#define BQ25896_BAT_COMP_MAX	140
#define BQ25896_BAT_COMP_MIN	0
#define BQ25896_BAT_COMP_STEP	20

#define BQ25896_VCLAMP_NUM	8
#define BQ25896_VCLAMP_MAX	224
#define BQ25896_VCLAMP_MIN	0
#define BQ25896_VCLAMP_STEP	32

#define BQ25896_ADC_IBAT_NUM	128
#define BQ25896_ADC_IBAT_MAX	6350
#define BQ25896_ADC_IBAT_MIN	0
#define BQ25896_ADC_IBAT_STEP	50

#define BQ25896_ADC_VBAT_NUM	128
#define BQ25896_ADC_VBAT_MAX	4848
#define BQ25896_ADC_VBAT_MIN	2304
#define BQ25896_ADC_VBAT_STEP	20

#define BQ25896_ADC_VBUS_NUM	128
#define BQ25896_ADC_VBUS_MAX	15300
#define BQ25896_ADC_VBUS_MIN	2600
#define BQ25896_ADC_VBUS_STEP	100

#define BQ25896_BOOSTV_NUM	16
#define BQ25896_BOOSTV_MAX	5510
#define BQ25896_BOOSTV_MIN	4550
#define BQ25896_BOOSTV_STEP	64

#define BQ25896_TREG_NUM	4
#define BQ25896_TREG_MAX	120
#define BQ25896_TREG_MIN	60
#define BQ25896_TREG_STEP	20

#define BQ25896_SYS_MIN_NUM	8
#define BQ25896_SYS_MIN_MAX	3700
#define BQ25896_SYS_MIN_MIN	3000
#define BQ25896_SYS_MIN_STEP	100

#define BQ25896_IPREC_NUM	16
#define BQ25896_IPREC_MAX	1024
#define BQ25896_IPREC_MIN	64
#define BQ25896_IPREC_STEP	64

#define BQ25896_ITERM_NUM	16
#define BQ25896_ITERM_MAX	1024
#define BQ25896_ITERM_MIN	64
#define BQ25896_ITERM_STEP	64


#define CON1_RESET_SHIFT  7
#define CON1_RESET_MASK   (1 << CON1_RESET_SHIFT)

/* CON0 */
#define CON0_EN_HIZ_SHIFT  7
#define CON0_EN_HIZ_MASK   (1 << CON0_EN_HIZ_SHIFT)

#define CON0_EN_ILIM_SHIFT  6
#define CON0_EN_ILIM_MASK   (1 << CON0_EN_ILIM_SHIFT)

#define CON0_IINLIM_SHIFT  0
#define CON0_IINLIM_MASK   0x3F


/* CON1 */
#define CON1_VINDPM_OS_SHIFT  0
#define CON1_VINDPM_OS_MASK   0x1F


/* CON2 */
#define CON2_CONV_START_SHIFT  7
#define CON2_CONV_START_MASK   (1 << CON2_CONV_START_SHIFT)

#define CON2_CONV_RATE_SHIFT  6
#define CON2_CONV_RATE_MASK   (1 << CON2_CONV_RATE_SHIFT)

#define CON2_BOOST_FREQ_SHIFT  5
#define CON2_BOOST_FREQ_MASK   (1 << CON2_BOOST_FREQ_SHIFT)

#define CON2_ICO_EN_SHIFT  4
#define CON2_ICO_EN_MASK   (1 << CON2_ICO_EN_SHIFT)

#define CON2_HVDCP_EN_SHIFT  3
#define CON2_HVDCP_EN_MASK   (1 << CON2_HVDCP_EN_SHIFT)

#define CON2_MAX_EN_SHIFT  2
#define CON2_MAX_EN_MASK   (1 << CON2_MAX_EN_SHIFT)

#define CON2_FORCE_DPDM_SHIFT  1
#define CON2_FORCE_DPDM_MASK   (1 << CON2_FORCE_DPDM_SHIFT)

#define CON2_AUTO_DPDM_EN_SHIFT  0
#define CON2_AUTO_DPDM_EN_MASK   (1 << CON2_AUTO_DPDM_EN_SHIFT)




/* CON3 */
#define CON3_BAT_LOADEN_SHIFT  7
#define CON3_BAT_LOADEN_MASK   (1 << CON3_BAT_LOADEN_SHIFT)

#define CON3_WD_SHIFT  6
#define CON3_WD_MASK   (1 << CON3_WD_SHIFT)

#define CON3_OTG_CONFIG_SHIFT  5
#define CON3_OTG_CONFIG_MASK   (1 << CON3_OTG_CONFIG_SHIFT)

#define CON3_CHG_CONFIG_SHIFT  4
#define CON3_CHG_CONFIG_MASK   (1 << CON3_CHG_CONFIG_SHIFT)

#define CON3_SYS_V_LIMIT_SHIFT  1
#define CON3_SYS_V_LIMIT_MASK   0x0E

/* CON4 */
#define CON4_EN_PUMPX_SHIFT  7
#define CON4_EN_PUMPX_MASK   (1 << CON4_EN_PUMPX_SHIFT)

#define CON4_ICHG_SHIFT  0
#define CON4_ICHG_MASK   0x7F

/* CON5 */
#define CON5_IPRECHG_SHIFT  4
#define CON5_IPRECHG_MASK   0xF0

#define CON5_ITERM_SHIFT  0
#define CON5_ITERM_MASK   0x0F


/* CON6 */
#define CON6_VREG_SHIFT  2
#define CON6_VREG_MASK   0xFC

#define CON6_BATLOWV_SHIFT  1
#define CON6_BATLOWV_MASK   (1 << CON6_BATLOWV_SHIFT)

#define CON6_VRECHG_SHIFT  0
#define CON6_VRECHG_MASK   (1 << CON6_VRECHG_SHIFT)


/* CON7 */
#define CON7_EN_TERM_CHG_SHIFT  7
#define CON7_EN_TERM_CHG_MASK   (1 << CON7_EN_TERM_CHG_SHIFT)

#define CON7_STAT_DIS_SHIFT  6
#define CON7_STAT_DIS_MASK   (1 << CON7_STAT_DIS_SHIFT)

#define CON7_WTG_TIM_SET_SHIFT  4
#define CON7_WTG_TIM_SET_MASK   0x30

#define CON7_EN_TIMER_SHIFT  3
#define CON7_EN_TIMER_MASK   (1 << CON7_EN_TIMER_SHIFT)

#define CON7_SET_CHG_TIM_SHIFT  1
#define CON7_SET_CHG_TIM_MASK   0x06

#define CON7_JEITA_ISET_SHIFT  0
#define CON7_JEITA_ISET_MASK   (1 << CON7_JEITA_ISET_SHIFT)

/* CON8 */
#define CON8_TREG_SHIFT 0
#define CON8_TREG_MASK 0x3

#define CON8_VCLAMP_SHIFT 2
#define CON8_VCLAMP_MASK 0x1C

#define CON8_BAT_COMP_SHIFT 5
#define CON8_BAT_COMP_MASK 0xE0


/* CON9 */
#define CON9_PUMPX_UP_SHIFT	1
#define CON9_PUMPX_UP_MASK	(1 << CON9_PUMPX_UP_SHIFT)

#define CON9_PUMPX_DN_SHIFT	0
#define CON9_PUMPX_DN_MASK	(1 << CON9_PUMPX_DN_SHIFT)

#define CON9_JEITA_VSET_SHIFT	4
#define CON9_JEITA_VSET_MASK	(1 << CON9_JEITA_VSET_SHIFT)

#define CON9_FORCE_ICO_SHIFT 7
#define CON9_FORCE_ICO_MASK (1 << CON9_FORCE_ICO_SHIFT)

/* CONA */
#define CONA_BOOST_VLIM_SHIFT 4
#define CONA_BOOST_VLIM_MASK 0xF0

#define CONA_BOOST_ILIM_SHIFT	0
#define CONA_BOOST_ILIM_MASK	0x07


/* CONB */
#define CONB_VBUS_STAT_SHIFT  5
#define CONB_VBUS_STAT_MASK   0xE0

#define CONB_CHRG_STAT_SHIFT  3
#define CONB_CHRG_STAT_MASK   0x18

#define CONB_PG_STAT_SHIFT  2
#define CONB_PG_STAT_MASK   (1 << CONB_PG_STAT_SHIFT)

#define CONB_SDP_STAT_SHIFT  1
#define CONB_SDP_STAT_MASK   (1 << CONB_SDP_STAT_SHIFT)

#define CONB_VSYS_STAT_SHIFT  0
#define CONB_VSYS_STAT_MASK   (1 << CONB_VSYS_STAT_SHIFT)


/* CONC */
#define CONB_WATG_STAT_MASK   0x1
#define CONB_WATG_STAT_SHIFT  7

#define CONB_BOOST_STAT_SHIFT  6
#define CONB_BOOST_STAT_MASK   (1 << CONB_BOOST_STAT_SHIFT)

#define CONC_CHRG_FAULT_SHIFT  4
#define CONC_CHRG_FAULT_MASK   0x30

#define CONB_BAT_STAT_SHIFT  3
#define CONB_BAT_STAT_MASK   (1 << CONB_BAT_STAT_SHIFT)

/* COND */
#define COND_FORCE_VINDPM_SHIFT	7
#define COND_FORCE_VINDPM_MASK	(1 << COND_FORCE_VINDPM_SHIFT)

#define COND_VINDPM_SHIFT  0
#define COND_VINDPM_MASK   0x7F

/* CONE */
#define CONE_VBAT_SHIFT 0
#define CONE_VBAT_MASK 0x7F

/* CON11 */
#define CON11_VBUS_SHIFT 0
#define CON11_VBUS_MASK 0x7F

/* CON12 */
#define CONB_ICHG_STAT_SHIFT  0
#define CONB_ICHG_STAT_MASK   0x7F

/* CON13 */
#define CON13_IDPM_STAT_SHIFT  6
#define CON13_IDPM_STAT_MASK   (1 << CON13_IDPM_STAT_MASK)

#define CON13_VDPM_STAT_SHIFT  7
#define CON13_VDPM_STAT_MASK   (1 << CON13_VDPM_STAT_SHIFT)

//CEI comments start, workaround for BQ25896 power drop
extern unsigned int bq25896_workaround;
extern unsigned int bq25896_screen_on;
extern unsigned int bq25896_pre_inlim;
//CEI comments end, workaround for BQ25896 power drop

#endif /* __BQ25896_CHARGER_H */
